---
name: ğŸ¡ Home Assistant CI
on:
  push:
  pull_request:
jobs:
  yamllint:
    name: ğŸ§¹ yamllint
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v1
      - name: ğŸ•µï¸ Run yamllint
        uses: "docker://pipelinecomponents/yamllint:latest"
        with:
          args: yamllint --format github .
  homme-assistant:
    name: ğŸ¡ Home Assistant Config Check
    runs-on: ubuntu-latest
    needs: [yamllint]
    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v1
      - name: â¡ï¸ Copy stub files
        run: cp -R ./.stubs/* .
      - name: ğŸ•µï¸ Check configuration
        uses: "docker://homeassistant/home-assistant:stable"
        with:
          args: |
            python -m homeassistant --config /github/workspace --script check_config --info all
